#include <stdio.h>
#include <string.h>

void rootshell(){
    system("/bin/sh");
}

int main(){

    char real_pass[100];
    char user_pass[100];
    size_t len = 0;

    //get root password from file
    FILE * source = fopen("password.txt","r");
    if (source == NULL){
        perror("fopen");
        printf("Unable to read password.txt!");
        return;
    }
    char * buf = NULL;
    while(getline(&buf, &len, source) > 0){
        strcpy(real_pass,buf);
    }
    fclose(source);
    int len2 = strlen(real_pass);
    if(real_pass[len2-1] == '\n')
        real_pass[len2-1] = 0;

    //get user's attempt
    printf("enter root password: ");
    fflush(stdout);
    scanf("%s", user_pass);
    
    if(strcmp(real_pass,user_pass) == 0){
        printf("here comes a shell!\n");
        rootshell();
    }else{
        printf("incorrect password");
    }
}
